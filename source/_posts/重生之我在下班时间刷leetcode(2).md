---
title: é‡ç”Ÿä¹‹æˆ‘åœ¨ä¸‹ç­æ—¶é—´åˆ·leetcodeï¼ˆ2ï¼‰
date: 2025-06-17 21:09:00
---

# LeetCode é¢˜è§£ï¼šç»Ÿè®¡ä¸ç»™å®šæ•´æ•°ç›¸ç­‰çš„ä¸‹æ ‡å¯¹æ•°ç»„

é¢˜ç›®é“¾æ¥ï¼š[LeetCode - Count the Number of Arrays with K Matching Adjacent Elements](https://leetcode.cn/problems/count-the-number-of-arrays-with-k-matching-adjacent-elements/?envType=daily-question&envId=2025-06-17)

## ğŸ§  é¢˜ç›®æè¿°ç®€è¦

ç»™å®šä¸‰ä¸ªæ•´æ•° `n`ã€`m` å’Œ `k`ï¼Œè¡¨ç¤ºä½ éœ€è¦æ„é€ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ï¼Œæ•°ç»„å…ƒç´ å–å€¼èŒƒå›´ä¸º `1 ~ m`ï¼Œè¦æ±‚æ•°ç»„ä¸­**æ°å¥½æœ‰ `k` å¯¹ç›¸é‚»å…ƒç´ ç›¸ç­‰**ã€‚æ±‚æ»¡è¶³æ¡ä»¶çš„æ•°ç»„æ€»æ•°ï¼Œç»“æœå¯¹ `10^9 + 7` å–æ¨¡ã€‚

---

## ğŸš€ æ€è·¯åˆ†æ

æˆ‘ä»¬å°†è¿™ä¸ªé—®é¢˜è½¬åŒ–ä¸ºç»„åˆæ•°å­¦é—®é¢˜ï¼š

1. **åœ¨æ•°ç»„ä¸­æ°å¥½æœ‰ `k` ä¸ªç›¸é‚»ä½ç½®ç›¸ç­‰**ï¼Œè¯´æ˜æˆ‘ä»¬ä» `n-1` ä¸ªç›¸é‚»å¯¹ä¸­é€‰å‡º `k` ä¸ªä½¿å®ƒä»¬ç›¸ç­‰ï¼Œå…¶ä½™çš„ä¸ç›¸ç­‰ã€‚
2. **æ„é€ æ–¹æ³•ï¼š**
   - å…ˆé€‰æ‹©å“ªäº›ç›¸é‚»å¯¹æ˜¯ç›¸ç­‰çš„ï¼šä» `n-1` ä¸ªä½ç½®ä¸­é€‰å‡º `k` ä¸ªï¼Œç»„åˆæ•° `C(n-1, k)`ã€‚
   - ç¬¬ä¸€ä¸ªå…ƒç´ å¯ä»¥éšä¾¿å–ï¼Œæœ‰ `m` ç§é€‰æ‹©ã€‚
   - å¯¹äºæ¯ä¸€ä¸ªä¸ç›¸ç­‰çš„ç›¸é‚»ä½ç½®ï¼ˆ`n-1-k` ä¸ªï¼‰ï¼Œæœ‰ `m-1` ç§å–æ³•ï¼ˆä¸èƒ½ä¸å‰ä¸€ä¸ªç›¸ç­‰ï¼‰ã€‚

æ‰€ä»¥ï¼Œæœ€ç»ˆç»“æœä¸ºï¼š

```
C(n-1, k) * m * (m-1)^(n-1-k)
```

---

## ğŸ§® å…¬å¼æ¨å¯¼

è®¾ï¼š

- `C(n-1, k)` æ˜¯ä» `n-1` ä¸ªç›¸é‚»å¯¹ä¸­é€‰æ‹© `k` ä¸ªç›¸ç­‰çš„ç»„åˆæ•°
- `m` æ˜¯é¦–å…ƒç´ çš„é€‰æ‹©
- `(m-1)^(n-1-k)` æ˜¯éç›¸ç­‰ç›¸é‚»å¯¹çš„é€‰æ³•

æ‰€ä»¥ï¼š

```text
ç­”æ¡ˆ = C(n-1, k) Ã— m Ã— (m-1)^(n-1-k)
```

---

## ğŸ’» Go ä»£ç å®ç°

```go
const mx = 1e5 + 10
const mod = 1e9 + 7

var f [mx]int64
var g [mx]int64

// å¿«é€Ÿå¹‚
func qpow(a int64, k int) int64 {
    res := int64(1)
    for k != 0 {
        if k&1 == 1 {
            res = res * a % mod
        }
        a = a * a % mod
        k >>= 1
    }
    return res
}

// é¢„å¤„ç†é˜¶ä¹˜å’Œé˜¶ä¹˜é€†å…ƒ
func init() {
    f[0], g[0] = 1, 1
    for i := 1; i < mx; i++ {
        f[i] = f[i-1] * int64(i) % mod
        g[i] = qpow(f[i], mod-2)
    }
}

// ç»„åˆæ•° C(m, n)
func comb(m, n int) int64 {
    return f[m] * g[n] % mod * g[m-n] % mod
}

// ä¸»å‡½æ•°
func countGoodArrays(n int, m int, k int) int {
    ans := comb(n-1, k) * int64(m) % mod * qpow(int64(m-1), n-k-1) % mod
    return int(ans)
}
```

---

## âœ… æ€»ç»“

| æ­¥éª¤ | è¯´æ˜ |
|------|------|
| é€‰å‡º `k` ä¸ªç›¸é‚»å¯¹ç›¸ç­‰çš„ä½ç½® | ç»„åˆæ•° `C(n-1, k)` |
| ç¬¬ä¸€ä¸ªå…ƒç´ å¯ä»»æ„é€‰ | `m` ç§é€‰æ‹© |
| å‰©ä¸‹ `n - 1 - k` ä¸ªä½ç½®å¿…é¡»ä¸ç›¸ç­‰ | æ¯ä¸ªä½ç½®æœ‰ `m - 1` ç§é€‰æ‹© |
| æ—¶é—´å¤æ‚åº¦ | é¢„å¤„ç† O(n)ï¼ŒæŸ¥è¯¢ O(1) |
